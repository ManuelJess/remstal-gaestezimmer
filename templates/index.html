{% extends "layout.html" %}
{% block title %}{{ this.title }}{% endblock %}
{% block body %}
  {% set pages = site.query( this.path + '/index').include_undiscoverable(True).all() %}
  <header>
    <h1>{% for word in this.title.split() %}
      <span>{{ word }}</span>
      {% endfor %}
      </h1>
    <nav>
      <ul>
        {% for page in pages %}
        <li><a href="#{{ page._id }}">{{ page.title }}</a></li>
        {% endfor %}
      </ul>
    </nav>
  </header>
  <main class="page">
  {% for page in pages %}
    <section class="section" id="{{ page._id }}">
      <h1>{{ page.title }}</h1>
      {{ page.body }}
      
      {% if page.blocks %}
        {% for item in page.blocks.blocks %}
          <div class="block">{{ item }}</div>
        {% endfor %}
      {% endif %}

    </section>
  {% endfor %}
  </main>
{% endblock %}
